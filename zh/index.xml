<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0">
  <channel>
    <title>*&lt;^_^&gt;*</title>
    <link>https://caijin.dev/zh/</link>
    <description>*&lt;^_^&gt;*</description>
    <generator>Hugo -- gohugo.io</generator><language>zh-CN</language><copyright>xxxx</copyright><lastBuildDate>Sat, 02 May 2020 20:20:42 &#43;0800</lastBuildDate>
      <atom:link href="https://caijin.dev/zh/index.xml" rel="self" type="application/rss+xml" />
    <item>
  <title>Docker &#43; Gitlab &#43; Jenkins æ­å»ºæŒç»­é›†æˆç¯å¢ƒ</title>
  <link>https://caijin.dev/zh/docker-&#43;-gitlab-&#43;-jenkins-%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83/</link>
  <pubDate>Sat, 02 May 2020 20:20:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/docker-&#43;-gitlab-&#43;-jenkins-%E6%90%AD%E5%BB%BA%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90%E7%8E%AF%E5%A2%83/</guid>
  <description><![CDATA[Docker + Gitlab + Jenkins æ­å»ºæŒç»­é›†æˆç¯å¢ƒ å®‰è£…docker sudo apt update sudo apt install apt-transport-https \ ca-certificates \ curl \ gnupg-agent \ software-properties-common curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add - sudo add-apt-repository \ &#34;deb [arch=amd64] https://download.docker.com/linux/ubuntu \ $(lsb_release -cs) \ stable&#34; sudo apt update sudo apt install docker-ce docker-ce-cli containerd.ioå®‰è£…Gitlab sudo docker pull gitlab/gitlab-ce:nightlyç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œå›½å†…æ‹‰å–æŸäº›é•œåƒæ…¢çš„ä¸€æ‰¹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠdockeré•œåƒæºæ¢ä¸€ä¸‹ï¼Œ
sudo vim /etc/docker/daemon.jsonæˆ‘è¿™é‡Œæ›¿æ¢ä¸ºç½‘æ˜“å’Œç™¾åº¦çš„æºï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ¢æˆä»»æ„ä½ æƒ³è¦çš„ä¸€ä¸ªæˆ–å¤šä¸ª
{ &#34;registry-mirrors&#34;: [ &#34;https://hub-mirror.c.163.com&#34;, &#34;https://mirror.baidubce.com&#34; ] }ä¹‹åï¼Œé‡å¯docker
sudo systemctl daemon-reload sudo systemctl restart dockeré•œåƒæ‹‰å–å¥½äº†ä»¥åï¼Œå¯åŠ¨å®¹å™¨]]></description>
</item>
<item>
  <title>rediså¿…çŸ¥å¿…ä¼š</title>
  <link>https://caijin.dev/zh/redis/redis-%E5%85%B6%E4%BB%96/</link>
  <pubDate>Sat, 02 May 2020 20:20:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/redis/redis-%E5%85%B6%E4%BB%96/</guid>
  <description><![CDATA[Redis å…¶ä»– redis æ•°æ®æ·˜æ±°æœºåˆ¶ å½“æœºå™¨å†…å­˜ä¸å¤Ÿçš„æ—¶å€™ï¼ˆè¾¾åˆ°ç‰©ç†æœºå™¨æˆ–è€…é…ç½®çš„å†…å­˜ä¸Šé™æ—¶ï¼‰ï¼Œredisä¼šä¾æ®æ•°æ®æ·˜æ±°æœºåˆ¶æ·˜æ±°ä¸€éƒ¨åˆ†æ•°æ®ï¼Œæœ‰ä»¥ä¸‹6ç§æ–¹å¼ï¼š
volatile-lruï¼š åœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œä½¿ç”¨LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•ï¼Œå°†æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyæ·˜æ±° volatile-ttlï¼š åœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œæ ¹æ®TTLï¼ˆtime to liveï¼‰æ—¶é—´ï¼Œå°†å¿«è¦è¿‡æœŸçš„æ•°æ®æ·˜æ±° volatile-randomï¼š åœ¨è®¾ç½®äº†è¿‡æœŸæ—¶é—´çš„keyä¸­ï¼Œéšæœºæ·˜æ±°æ•°æ® allkeys-lruï¼š åœ¨æ‰€æœ‰keyä¸­ï¼Œæ·˜æ±°æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„æ•°æ® allkeys-randomï¼š åœ¨æ‰€æœ‰keyä¸­ï¼Œéšæœºæ·˜æ±°æ•°æ® noevictionï¼š ç¦æ­¢æ·˜æ±°æ•°æ® redisç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´© ç¼“å­˜ç©¿é€ï¼šè¯·æ±‚æ•°æ®åœ¨redisä¸­æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ä¸åˆ°ï¼Œæœ€åè¯·æ±‚è½åˆ°äº†æ•°æ®åº“ ç¼“å­˜å‡»ç©¿ï¼šçƒ­é—¨æ•°æ®çªç„¶å¤±æ•ˆï¼Œå¤§é‡è¯·æ±‚åˆ°äº†æ•°æ®åº“ ç¼“å­˜é›ªå´©ï¼šå¤§é‡æ•°æ®åŒæ—¶å¤±æ•ˆ Note: è§£å†³æ–¹æ¡ˆï¼š
ç©¿é€ï¼šå¯¹äºéæ³•å‚æ•°ï¼ˆegï¼šid&lt;=0ï¼‰å¢åŠ å‚æ•°æ ¡éªŒï¼Œè¿‡æ»¤æ‰ä¸å­˜åœ¨æ•°æ®çš„è¯·æ±‚ï¼›å¯¹äºåˆæ³•å‚æ•°(eg: id=xxxx)ï¼Œä½†æ˜¯æ•°æ®ä¸å­˜åœ¨ï¼šå°†æ•°æ®è®¾ç½®ä¸ºnull å‡»ç©¿ï¼šè®¾ç½®çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ é›ªå´©ï¼šé¿å…å¤§é‡æ•°æ®åŒä¸€æ—¶é—´è¿‡æœŸï¼šåˆ†æ•£è¿‡æœŸæ—¶é—´ï¼›åˆ†æ•£æ•°æ®åˆ°ä¸åŒç¼“å­˜æ•°æ®åº“ master-slave ä½œç”¨ï¼šä¸»ä»å¤‡ä»½ï¼Œé˜²æ­¢èŠ‚ç‚¹å®•æœºï¼›è¯»å†™åˆ†ç¦»ï¼Œè¾¾åˆ°è´Ÿè½½å‡è¡¡ç›®çš„ï¼Œæé«˜ç³»ç»Ÿååé‡ å…¨é‡åŒæ­¥ï¼Œå‘ç”Ÿåœ¨slaveåˆå§‹åŒ–é˜¶æ®µï¼š slaveè¿æ¥masterï¼Œå‘é€SYNCå‘½ä»¤ masteræ”¶åˆ°å‘½ä»¤åï¼Œå¼€å§‹æ‰§è¡ŒBGSAVEå‘½ä»¤ç”Ÿæˆrdbæ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ç¼“å†²åŒºè®°å½•æ­¤åæ‰€æ‰§è¡Œçš„_å†™å‘½ä»¤_ masteræ‰§è¡Œå®ŒBGSAVEå‘½ä»¤åï¼Œå‘æ‰€æœ‰slaveå‘é€rdbæ–‡ä»¶ slaveæ”¶åˆ°rdbæ–‡ä»¶åï¼Œä¸¢å¼ƒæ‰€æœ‰æ—§æ•°æ®ï¼Œè½½å…¥æ”¶åˆ°çš„æ•°æ® masterå‘é€å®Œæ–‡ä»¶åï¼Œå°±å¼€å§‹æ”¾é€ç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤ slaveå®Œæˆæ•°æ®è½½å…¥åï¼Œå¼€å§‹æ¥æ”¶å‘½ä»¤è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ¥è‡ªmasteråŒæ­¥çš„å†™å‘½ä»¤ å¢é‡åŒæ­¥ï¼šslaveåˆå§‹åŒ–åæ­£å¸¸å·¥ä½œï¼Œæ¥æ”¶masterå‘é€çš„å†™å‘½ä»¤ã€‚masteræ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤å°±ä¼šå‘slaveå‘é€ç›¸åŒçš„å†™å‘½ä»¤ï¼Œslaveæ¥æ”¶å¹¶æ‰§è¡Œæ”¶åˆ°çš„å†™å‘½ä»¤ åŒæ­¥ç­–ç•¥ï¼šmasterã€slaveåˆšåˆšè¿æ¥çš„æ—¶å€™ï¼Œè¿›è¡Œå…¨é‡åŒæ­¥ï¼›å…¨é‡åŒæ­¥ç»“æŸåå¼€å§‹å¢é‡åŒæ­¥ã€‚å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œslaveåœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥å‘èµ·å…¨é‡åŒæ­¥ã€‚redisç­–ç•¥ä¸ºï¼Œé¦–å…ˆå…ˆè¿›è¡Œå¢é‡åŒæ­¥ï¼Œå¦‚ä¸æˆåŠŸï¼Œè¿›è¡Œå…¨é‡åŒæ­¥ ]]></description>
</item>
<item>
  <title>redisæŒä¹…åŒ–</title>
  <link>https://caijin.dev/zh/redis/redis%E6%8C%81%E4%B9%85%E5%8C%96/</link>
  <pubDate>Sat, 02 May 2020 20:20:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/redis/redis%E6%8C%81%E4%B9%85%E5%8C%96/</guid>
  <description><![CDATA[redisæŒä¹…åŒ– ä¸¤ç§æ–¹å¼ï¼šRDBã€AOF
RDBï¼Œredis-databaseï¼Œä½¿ç”¨å‹ç¼©çš„äºŒè¿›åˆ¶æ–‡ä»¶ä¿å­˜çš„æ˜¯rediså†…å­˜ä¸­å®Œæ•´çš„æ•°æ®ï¼Œç›¸å½“äºæ•°æ®çš„å¿«ç…§ï¼Œé»˜è®¤çš„æŒä¹…åŒ–æ–¹å¼ï¼Œå¯ä»¥æ‰‹åŠ¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ‰§è¡Œï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªåŠ¨æ‰§è¡Œ
SAVEå‘½ä»¤ï¼šä¼šé˜»å¡æœåŠ¡å™¨è¿›ç¨‹ï¼Œæ­¤æ—¶æ‰€æœ‰å‘½ä»¤éƒ½ä¼šä¸€ç›´é˜»å¡ç›´åˆ°saveå‘½ä»¤æ‰§è¡Œå®Œæ¯• BGSAVEå‘½ä»¤ï¼šä¼šé‡æ–°èµ·ä¸€ä¸ªè¿›ç¨‹å¤„ç†ï¼Œä¸ä¼šé˜»å¡ä»»ä½•å‘½ä»¤ æ¢å¤è¿‡ç¨‹ï¼š
å¦‚æœæ²¡å¼€å¯AOFæŒä¹…åŒ–ï¼ŒæœåŠ¡å™¨æ‰ä¼šä½¿ç”¨RDBæ–‡ä»¶è¿˜åŸæ•°æ® å¦‚æœå¼€å¯äº†AOFæŒä¹…åŒ–ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆä½¿ç”¨AOFæ–‡ä»¶è¿˜åŸæ•°æ® AOFï¼Œappend-only-fileï¼Œé»˜è®¤å…³é—­ï¼ŒæœåŠ¡å™¨åœ¨æ‰§è¡Œå®Œå†™å‘½ä»¤åï¼Œä¼šä»¥åè®®æ ¼å¼å°†å‘½ä»¤è¿½åŠ åˆ°AOFç¼“å†²åŒºï¼Œç„¶åæœåŠ¡å™¨æ ¹æ®appendfsyncé€‰é¡¹å†³å®šä½•æ—¶å°†AOFç¼“å†²åŒºå†…å®¹å†™å…¥åˆ°AOFæ–‡ä»¶ã€‚
appendfsyncï¼š
alwaysï¼Œæ¯ä¸ªå†™å‘½ä»¤éƒ½ä¼šåŒæ­¥åˆ°AOFæ–‡ä»¶ï¼Œæ˜¯æœ€å®‰å…¨çš„æ–¹å¼ï¼Œå³ä½¿æ•…éšœåœæœºï¼Œä¸¢å¤±æ•°æ®æœ€å¤šå°±ä¸€ä¸ªå†™å‘½ä»¤çš„æ•°æ® everysecï¼Œæ¯ç§’é’Ÿéƒ½ä¼šåŒæ­¥æ•°æ®åˆ°AOFæ–‡ä»¶ï¼Œæ•…éšœåœæœºæœ€å¤šå°±ä¸¢å¤±ä¸€ç§’é’Ÿçš„å†™å…¥å‘½ä»¤çš„æ•°æ®ï¼Œæ˜¯AOFæ–¹å¼çš„é»˜è®¤å€¼ noï¼Œä»ä¸åŒæ­¥æ•°æ®ï¼Œå‡ºç°æ•…éšœåï¼Œä¼šä¸¢å¤±ä¸Šæ¬¡åŒæ­¥ä¹‹åçš„æ‰€æœ‰å†™å…¥æ•°æ® æ¢å¤è¿‡ç¨‹ï¼š
åˆ›å»ºä¸€ä¸ªä¼ªå®¢æˆ·ç«¯ ä»AOFæ–‡ä»¶åˆ†æå¹¶è¯»å–ä¸€æ¡å†™å‘½ä»¤ ä¼ªå®¢æˆ·ç«¯æ‰§è¡Œå‘½ä»¤ é‡å¤ä¸Šä¸¤ä¸ªæ­¥éª¤ï¼Œç›´åˆ°AOFæ–‡ä»¶æ‰€æœ‰å†™å‘½ä»¤æ‰§è¡Œå®Œæ¯• éšç€è¿è¡Œæ—¶é—´çš„å¢åŠ ï¼ŒAOFæ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤§ï¼Œå ç”¨çš„ç£ç›˜ç©ºé—´ä¼šå¢åŠ ï¼Œè€Œä¸”æ•°æ®æ¢å¤çš„è¿‡ç¨‹æ‰€è€—è´¹çš„æ—¶é—´ä¹Ÿä¼šå¢åŠ ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œredisæä¾›äº†AOFé‡å†™åŠŸèƒ½ï¼šredisä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„AOFæ–‡ä»¶æ›¿ä»£ç°æœ‰AOFæ–‡ä»¶ï¼Œæ–°æ—§ä¸¤ä¸ªæ–‡ä»¶ä¿å­˜çš„æ•°æ®ç›¸åŒï¼Œåªä¸è¿‡æ–°AOFæ–‡ä»¶ä¿å­˜çš„æ˜¯ç²¾ç®€åçš„å‘½ä»¤ï¼Œä¸ä¼šæµªè´¹å­˜å‚¨ç©ºé—´
AOFé‡å†™è¿‡ç¨‹ï¼š
æœåŠ¡å™¨åˆ›å»ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹å¼€å§‹AOFæ–‡ä»¶é‡å†™ æœåŠ¡å™¨æ‰§è¡Œæ‰€æœ‰å‘½ä»¤å¤–è¿˜è¦å°†å†™å‘½ä»¤å†™å…¥AOFç¼“å†²åŒºå’ŒAOFé‡å†™ç¼“å†²åŒº å­è¿›ç¨‹å®ŒæˆAOFé‡å†™åå‘çˆ¶è¿›ç¨‹å‘é€ä¿¡å·ï¼Œçˆ¶è¿›ç¨‹æ”¶åˆ°ä¿¡å·åï¼š å°†AOFé‡å†™ç¼“å†²åŒºå†…å®¹å†™å…¥åˆ°æ–°AOFæ–‡ä»¶ä¸­ï¼Œä¿è¯æ–°AOFæ–‡ä»¶ä¿å­˜çš„æ•°æ®å’ŒæœåŠ¡å™¨å½“å‰çš„æ•°æ®ä¸€è‡´ å¯¹æ–°AOFæ–‡ä»¶é‡å‘½åï¼Œè¦†ç›–ç°æœ‰AOFæ–‡ä»¶ï¼Œå®Œæˆæ–°æ—§AOFæ–‡ä»¶æ›¿æ¢ ä¸¤ç§æŒä¹…åŒ–æ–¹å¼çš„åŒºåˆ« å®ç°æ–¹å¼
RDBæŒä¹…åŒ–è®°å½•çš„æ˜¯ç»“æœï¼ŒAOFæŒä¹…åŒ–è®°å½•çš„æ˜¯è¿‡ç¨‹
æ–‡ä»¶ä½“ç§¯
è®°å½•ç»“æœçš„æ–¹å¼è‚¯å®šæ¯”è®°å½•è¿‡ç¨‹çš„æ–¹å¼å ç”¨çš„å­˜å‚¨ç©ºé—´å°ï¼Œå³ï¼šRDBæ–‡ä»¶å ç”¨çš„å­˜å‚¨ç©ºé—´å°
å®‰å…¨æ€§
AOFçš„å®‰å…¨æ€§è¦æ¯”RDBçš„é«˜ã€‚RDBæŒä¹…åŒ–ä¼šä¸¢å¤±ä»ä¸Šæ¬¡ä¿å­˜ä»¥åçš„æ•°æ®ï¼Œè€ŒAOFæŒä¹…åŒ–æœ€å¤šä¸¢å¤±1sçš„æ•°æ®
ä¼˜å…ˆçº§
AOFçš„ä¼˜å…ˆçº§æ¯”RDBçš„é«˜]]></description>
</item>
<item>
  <title>unsafe.Pointer</title>
  <link>https://caijin.dev/zh/golang/unsafe.pointer/</link>
  <pubDate>Sat, 02 May 2020 20:20:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/golang/unsafe.pointer/</guid>
  <description><![CDATA[unsafe.Pointerç›¸å½“äºæŒ‡å‘ä»»æ„ç±»å‹çš„æŒ‡é’ˆ(*æŒ‡é’ˆ)ï¼Œä½†å®ƒæœ‰å››ç§ç‰¹æ®Šçš„æ“ä½œä¸åŒäºä¸€èˆ¬çš„æŒ‡é’ˆï¼š
ä»»æ„ç±»å‹çš„æŒ‡é’ˆ(*)å¯ä»¥è½¬æ¢ä¸ºPointer PointeræŒ‡é’ˆä¹Ÿå¯ä»¥è½¬æ¢ä¸ºä»»æ„ç±»å‹çš„æŒ‡é’ˆ uintptrå¯ä»¥è½¬æ¢æˆPointer Pointerå¯ä»¥ä¹Ÿå¯ä»¥è½¬æ¢ä¸ºuintptr å³:
Pointer &lt;&mdash;&gt;(*)
uintptr&lt;&mdash;-&gt; Pointer
Pointerå…è®¸ç¨‹åºå¿½ç•¥ç±»å‹æ£€æµ‹ä»è€Œè¯»å†™ä»»æ„çš„å†…å­˜ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨unsafeåŒ…çš„æ—¶å€™è¦æ ¼å¤–å°å¿ƒã€‚
æ¯”å¦‚å°†float64è½¬åŒ–ä¸ºint64ï¼Œæ­£å¸¸æƒ…å†µä¸‹æ˜¯éœ€è¦éµå®ˆgoçš„ç±»å‹æ£€æµ‹ï¼Œè¿›è¡Œç±»å‹å¼ºè½¬ä¹‹åæ‰èƒ½æ­£å¸¸è¿è¡Œï¼š
var ( sourceValue float64 targetValue int46 ) sourceValue = 300.00 targetValue = int64(sourceValue) // targetValue = sourceValue //err: type not match ä½¿ç”¨ç¤ºä¾‹ï¼š
å°†*T1è½¬æ¢ä¸º*T2
func Float64bits(f float64) uint64{ return (*uint64)(unsafe.Pointer(&amp;f)) } //unsafe.Pointer(&amp;f)å³ç¬¬ä¸€æ¡è§„åˆ™ï¼šå°†ä»»æ„ç±»å‹æŒ‡é’ˆè½¬æ¢ä¸ºPointer //(*uint64)(unsafe.Pointer)å³ç¬¬äºŒæ¡è§„åˆ™ï¼šå°†Pointerè½¬æ¢ä¸ºä»»æ„ç±»å‹ å°†Pointerè½¬æ¢ä¸ºuintptr(å–åœ°å€å€¼)
func Pointer2uintptr(p unsafe.Pointer) uintprt{ return (uintptr)(p) } //(uintprt)(unsafe.Pointer)å³ç¬¬ä¸‰æ¡è§„åˆ™ï¼šå°†Pointerè½¬æ¢ä¸ºuintptr Note:ä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦è¿™ä¹ˆç”¨ï¼Œå› ä¸ºuintptræœ¬è´¨ä¸Šæ˜¯æ•´æ•°ç±»å‹ï¼Œå½“Pointerä¸­çš„æŒ‡é’ˆå€¼å˜äº†ä»¥åï¼Œuintptrçš„å€¼å¹¶ä¸éšç€åŸå§‹æŒ‡é’ˆçš„å€¼å˜åŒ–ï¼Œè¿™é‡Œä»…ä»…åªæ˜¯å‡ºäºæ¼”ç¤ºçš„ç›®çš„è¿™ä¹ˆå†™ï¼Œæ‰€ä»¥åˆ«ç”¨ä»»ä½•å˜é‡ä¿å­˜Pointerè½¬æ¢ä¸ºuintpträ¹‹åçš„å€¼
å°†æŒ‡é’ˆå’Œåç§»åšè¿ç®—ä»¥åè¿”å›
p = unsafe.Pointer(uintptr(p)+offset) //offset æ˜¯ä¸€ä¸ªæ•´å‹çš„å€¼ï¼Œå¯ä»¥æ˜¯è®¡ç®—åçš„ï¼Œæ¯”å¦‚ //å¯¹äºç»“æ„ä½“ï¼š f = unsafe.Pointer(uintptr(unsafe.Pointer(&amp;s))+unsafe.Offsetof(s.f)) //ä¸Šé¢ç­‰åŒäº f = unsafe.Pointer(&amp;s.f) //å¯¹äºslice e := unsafe.]]></description>
</item>
<item>
  <title>golangå†…å­˜å¯¹é½</title>
  <link>https://caijin.dev/zh/golang/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/</link>
  <pubDate>Sat, 02 May 2020 20:18:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/golang/%E5%86%85%E5%AD%98%E5%AF%B9%E9%BD%90/</guid>
  <description><![CDATA[golangå†…å­˜å¯¹é½ ä¸€ä¸ªgolangçš„ç»“æ„ä½“ï¼Œåœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•å­˜æ”¾çš„å‘¢ï¼Ÿå³ï¼Œç»“æ„ä½“çš„å†…å­˜ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä¼˜åŒ–çš„ç©ºé—´å‘¢ï¼Ÿä»Šå¤©æ¥ä¸€æ¢ç©¶ç«Ÿ
note:æˆ‘æ‰€ç”¨çš„æ˜¯64biteçš„æœºå™¨ï¼Œåœ¨32ä½çš„æœºå™¨æœ‰äº›ç±»å‹çš„å¤§å°æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚int
åŸºæœ¬æ•°æ®ç±»å‹çš„å¤§å°
var ( boolField bool byteField byte int8Field int8 int16Field int16 int32Field int32 intField int int64Field int64 float32Field float32 float64Field float64 stringField string mapField map[string]interface{} sliceField []interface{} ) fmt.Println(unsafe.Sizeof(boolField)) //1 fmt.Println(unsafe.Sizeof(byteField)) //1 fmt.Println(unsafe.Sizeof(int8Field)) //1 fmt.Println(unsafe.Sizeof(int16Field)) //2 fmt.Println(unsafe.Sizeof(int32Field)) //4 fmt.Println(unsafe.Sizeof(intField)) //8 fmt.Println(unsafe.Sizeof(int64Field)) //8 fmt.Println(unsafe.Sizeof(float32Field)) //4 fmt.Println(unsafe.Sizeof(float64Field)) //8 fmt.Println(unsafe.Sizeof(stringField)) //16 fmt.Println(unsafe.Sizeof(mapField)) //8 fmt.Println(unsafe.Sizeof(sliceField)) //24 note: unsafe.Sizeof()è¿”å›çš„æ˜¯å­—èŠ‚æ•°ï¼Œå¦‚æœæœ‰è¿™ä¹ˆä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒæ‰€å ç”¨çš„å†…å­˜æ˜¯28Bä¹ˆï¼Ÿ
type testStruct struct { boolField bool stringField string byteField byte int64Field int64 int16Field int16 }è¿è¡Œä¸€ä¸‹çœ‹çœ‹ï¼š]]></description>
</item>
<item>
  <title>kafkaç®€ä»‹</title>
  <link>https://caijin.dev/zh/kafka/kafka/</link>
  <pubDate>Sat, 02 May 2020 20:18:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/kafka/kafka/</guid>
  <description><![CDATA[Kafka ä¸€ã€åŸºæœ¬æ¦‚å¿µ kafka clusterï¼škafkaé›†ç¾¤ï¼Œä¸€ä¸ªé›†ç¾¤ç”±å¤šä¸ªå®ä¾‹ï¼ˆbrokerï¼‰ç»„æˆï¼Œé€šè¿‡zookeeperè¿›è¡Œå…ƒæ•°æ®ï¼ˆbrokerIDã€broker åœ°å€ç­‰ä¿¡æ¯ï¼Œpartitionçš„leaderã€followerä¿¡æ¯ç­‰ï¼‰å…±äº«ä¸åŒæ­¥ brokerï¼škafkaé›†ç¾¤ä¸­çš„ä¸€ä¸ªkafkaæœåŠ¡å®ä¾‹ï¼Œé›†ç¾¤å†…æ¯ä¸ªbrokeréƒ½æœ‰ä¸€ä¸ªä¸é‡å¤çš„ç¼–å·ï¼Œå¦‚broker-0ã€broker-1 producerï¼šæ¶ˆæ¯ç”Ÿäº§è€… topicï¼šæ¶ˆæ¯ä¸»é¢˜ï¼Œå¯ä»¥ç†è§£ä¸ºæ¶ˆæ¯åˆ†ç±»ï¼Œä¸ºé€»è¾‘æ¦‚å¿µã€‚Kafkaçš„æ¶ˆæ¯å°±ä¿å­˜åœ¨topicï¼Œæ¯ä¸ªbrokerä¸Šéƒ½å¯ä»¥åˆ›å»ºå¤šä¸ªtopicã€‚ partitionï¼štopicçš„åˆ†åŒºï¼Œæ¯ä¸ªtopicå¯ä»¥æœ‰å¤šä¸ªåˆ†åŒºï¼Œåˆ†åŒºçš„ä½œç”¨æ˜¯åšè´Ÿè½½ï¼Œæé«˜Kafkaçš„ååé‡ã€‚åŒä¸€ä¸ªtopicåœ¨ä¸åŒåˆ†åŒºçš„æ•°æ®æ˜¯ä¸é‡å¤çš„ï¼Œpartitionçš„è¡¨ç°å½¢å¼å°±æ˜¯ä¸€ä¸ªä¸ªæ–‡ä»¶å¤¹ï¼Œä¸ºç‰©ç†æ¦‚å¿µã€‚ replicationï¼šåˆ†åŒºçš„å‰¯æœ¬ï¼Œå‰¯æœ¬çš„ä½œç”¨å°±æ˜¯æé«˜Kafkaçš„å¯é æ€§å’Œå¯ç”¨æ€§ã€‚åŒä¸€ä¸ªpartitionæœ‰å¤šä¸ªreplicationçš„æƒ…å†µä¸‹ï¼Œä¼šé€šè¿‡zookeeperé€‰å‡ºä¸€ä¸ªleaderï¼Œå…¶ä½™çš„ä¸ºfollowerï¼Œproducer/consumer è¯»å†™partitionçš„æ—¶å€™ï¼Œå°±æ˜¯é€šè¿‡leaderè¿›è¡Œçš„ã€‚å½“leaderä¸å¯ç”¨æ—¶ï¼Œä¼šé€‰æ‹©ä¸€ä¸ªfolloweræˆä¸ºleaderã€‚åœ¨Kafkaä¸­ï¼Œé»˜è®¤çš„æœ€å¤§å‰¯æœ¬æ•°é‡æ˜¯10ä¸ªï¼Œè€Œä¸”å‰¯æœ¬çš„æ•°é‡ä¸èƒ½è¶…è¿‡brokeræ•°é‡ consumerï¼šæ¶ˆæ¯æ¶ˆè´¹è€… consumer groupï¼šæ¶ˆæ¯æ¶ˆè´¹è€…ç»„ã€‚ä¸ºäº†æé«˜Kafkaçš„ååé‡ã€‚å¯ä»¥å°†å¤šä¸ªconsumerç»„æˆä¸€ä¸ªgroupï¼ŒåŒä¸€ä¸ªpartitionæ•°æ®åªèƒ½è¢«groupä¸­çš„ä¸€ä¸ªconsumeræ¶ˆè´¹ã€‚åŒä¸€ä¸ªgroupé‡Œçš„consumerå¯ä»¥æ¶ˆè´¹åŒä¸€ä¸ªtopicçš„ä¸åŒåˆ†åŒºçš„æ•°é‡ã€‚è¿™æ ·ä¹Ÿå¯ä»¥ä¿è¯ï¼ŒåŒä¸€æ¶ˆæ¯ï¼Œä¸ä¼šè¢«é‡å¤æ¶ˆè´¹ äºŒã€Kafkaæ ¸å¿ƒè§„åˆ™ å·¥ä½œæµç¨‹
producerå…ˆä»é›†ç¾¤ä¸­è·å–åˆ†åŒºçš„leader producerå°†æ¶ˆæ¯å‘é€ç»™leader leaderå°†æ¶ˆæ¯å†™å…¥æœ¬åœ°æ–‡ä»¶ followerä»leader pull æ¶ˆæ¯ followerå°†æ¶ˆæ¯å†™å…¥æœ¬åœ°æ–‡ä»¶åï¼Œå‘leaderå‘é€ACK leaderæ”¶åˆ°æ‰€æœ‰å‰¯æœ¬çš„ACKåï¼Œå‘producerå‘é€ACK æ¯æ¡æ¶ˆæ¯æ˜¯è¿½åŠ åˆ°åˆ†åŒºä¸­ï¼Œé¡ºåºå†™å…¥ç£ç›˜ï¼Œæ‰€ä»¥ä¿è¯åŒä¸€åˆ†åŒºçš„æ•°æ®æ˜¯æœ‰åºçš„ produceré‡‡ç”¨pushæ¨¡å¼å°†æ¶ˆæ¯å‘å¸ƒåˆ°broker followeræ˜¯ä¸»åŠ¨å»leader pullæ¶ˆæ¯è¿›è¡ŒåŒæ­¥çš„ producerå¦‚ä½•ç¡®å®šæ•°æ®è¯¥å†™åˆ°é‚£ä¸ªpartition partitionåœ¨å†™å…¥çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šéœ€è¦å†™å…¥çš„partitionï¼›å¦‚æœæŒ‡å®šï¼Œåˆ™å†™å…¥å¯¹åº”çš„partition å¦‚æœæ²¡æœ‰æŒ‡å®špartitionï¼Œä½†æ˜¯è®¾ç½®äº†keyï¼Œåˆ™ä¼šæ ¹æ®keyçš„å€¼hashåˆ°ä¸€ä¸ªpartition å¦‚æœæ—¢æ²¡æœ‰partitionï¼Œä¹Ÿæ²¡æœ‰keyï¼Œåˆ™ä¼šè½®è¯¢é€‰å‡ºä¸€ä¸ªpartition å¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸ä¸¢å¤±ï¼šproducerå†™å…¥æ¶ˆæ¯ã€followeråŒæ­¥leaderæ¶ˆæ¯çš„æ—¶å€™ï¼Œéƒ½ä¼šè¿”å›ACKï¼Œé€šè¿‡ACKåº”ç­”æœºåˆ¶ï¼Œå¯ä»¥ç¡®ä¿æ¶ˆæ¯ä¸ä¸¢ã€‚åœ¨ç”Ÿäº§è€…å‘kafkaå†™æ•°æ®çš„æ—¶å€™ï¼Œå¯ä»¥è®¾å®šå‚æ•°acksæ¥ç¡®å®škafkaæ˜¯å¦ç¡®è®¤æ”¶åˆ°æ•°æ®ï¼Œè¿™ä¸ªå€¼å¯ä»¥è®¾ç½®ä¸º0ã€1ã€all
0ä»£è¡¨produceræ¶ˆæ¯å‘å¾€clusterä¸éœ€è¦ç­‰åˆ°clusterè¿”å›ACKæ¶ˆæ¯ï¼Œæ‰€ä»¥è®¾ç½®è¿™ä¸ªå€¼ä¸èƒ½ç¡®ä¿æ¶ˆæ¯å‘é€æˆåŠŸï¼Œå®‰å…¨æ€§æœ€ä½ï¼Œä½†æ˜¯æ•ˆç‡æœ€é«˜ 1ä»£è¡¨produceræ¶ˆæ¯å‘å¾€clusteræ—¶ï¼Œåªè¦leaderåº”ç­”å°±å¯ä»¥å‘é€ä¸‹ä¸€æ¡ï¼Œæ‰€ä»¥è¿™ä¸ªè®¾ç½®åªèƒ½ç¡®ä¿å‘é€ç»™leaderæˆåŠŸ allä»£è¡¨produceræ¶ˆæ¯å‘å¾€clusteræ—¶ï¼Œéœ€è¦æ‰€æœ‰çš„followeréƒ½å®Œæˆä»leaderåŒæ­¥ï¼Œæ‰ä¼šå‘é€ä¸‹ä¸€æ¡ï¼Œç¡®ä¿leaderå‘é€æˆåŠŸå¹¶ä¸”æ‰€æœ‰followeréƒ½å®Œæˆå¤‡ä»½ã€‚å®‰å…¨æ€§æœ€é«˜ï¼Œä½†æ˜¯æ•ˆç‡æœ€ä½ æ•°æ®ä¿å­˜
partitionç»“æ„ï¼šæ¯ä¸ªpartitionæ–‡ä»¶å¤¹ç”±å¤šä¸ªsegmentæ–‡ä»¶ç»„æˆï¼Œæ¯ç»„segmentæ–‡ä»¶åŒ…å«.indexã€.logæ–‡ã€.timeindexä¸‰ä¸ªæ–‡ä»¶ï¼Œå…¶ä¸­.indexã€.logæ–‡ä»¶ä¸ºç´¢å¼•æ–‡ä»¶ï¼Œlogæ–‡ä»¶å°±æ˜¯å­˜å‚¨messageçš„åœ°æ–¹ã€‚Kafkaå°±æ˜¯åˆ©ç”¨segment+indexçš„æ–¹å¼è§£å†³æŸ¥è¯¢æ•ˆç‡ä½é—®é¢˜ messageç»“æ„ï¼šmessageä¸»è¦åŒ…å«æ¶ˆæ¯ä½“ã€æ¶ˆæ¯å¤§å°ã€offsetã€å‹ç¼©ç±»å‹ç­‰ä¿¡æ¯ å­˜å‚¨ç­–ç•¥ï¼šæ— è®ºmessageæ˜¯å¦è¢«æ¶ˆè´¹ï¼ŒKafkaéƒ½ä¼šä¿å­˜æ‰€æœ‰æ¶ˆæ¯ï¼Œå¯¹äºæ—§æ•°æ®åˆ é™¤ç­–ç•¥æœ‰ä¸¤ç§ï¼šåŸºäºæ—¶é—´ï¼Œé»˜è®¤7å¤©ï¼›åŸºäºå¤§å°ï¼Œé»˜è®¤1GBã€‚ consumer groupä¸­consumerå’Œpartitionçš„å…³ç³»ï¼š
ä¸€ä¸ªconsumerå¯ä»¥æ¶ˆè´¹å¤šä¸ªpartitionä¸­çš„æ•°æ® ä¸€ä¸ªpartitionåªèƒ½è¢«ä¸€ä¸ªconsumeræ¶ˆè´¹ ä¸‰ã€Kafkaååé‡å¤§çš„åŸå›  å››ã€QA leaderçš„é€‰ä¸¾
kafkaä¸æ˜¯å¤šæ•°æŠ•ç¥¨é€‰ä¸¾leaderã€‚kafkaåŠ¨æ€ç»´æŠ¤ä¸€ç»„åŒæ­¥leaderæ•°æ®çš„å‰¯æœ¬ï¼ˆISR in-sync-replicationï¼‰ï¼Œåªæœ‰è¿™ä¸ªç»„çš„æˆå‘˜æ‰æœ‰èµ„æ ¼å½“é€‰leaderï¼Œkafkaå‰¯æœ¬å†™å…¥ä¸è¢«è®¤ä¸ºæ˜¯å·²æäº¤ï¼Œç›´åˆ°æ‰€æœ‰çš„åŒæ­¥å‰¯æœ¬å·²ç»æ¥æ”¶æ‰è®¤ä¸ºã€‚è¿™ç»„ISRä¿å­˜åœ¨zookeeperï¼Œæ­£å› ä¸ºå¦‚æ­¤ï¼Œåœ¨ISRä¸­çš„ä»»ä½•å‰¯æœ¬éƒ½æœ‰èµ„æ ¼å½“é€‰leaderï¼Œè¿™æ˜¯kafkaçš„ä½¿ç”¨æ¨¡å‹ï¼Œæœ‰å¤šä¸ªåˆ†åŒºå’Œç¡®ä¿leaderå¹³è¡¡æ˜¯å¾ˆé‡è¦çš„ä¸€ä¸ªé‡è¦å› ç´ ã€‚æœ‰äº†è¿™ä¸ªæ¨¡å‹ï¼ŒISRå’Œf+1å‰¯æœ¬ï¼Œkafkaçš„ä¸»é¢˜å¯ä»¥å®¹å¿få¤±è´¥è€Œä¸ä¼šä¸¢å¤±å·²æäº¤çš„æ¶ˆæ¯ã€‚
æˆä¸ºISRåˆ—è¡¨ä¸­çš„ä¸€å‘˜ï¼Œéœ€è¦æ»¡è¶³ä¸¤ä¸ªæ¡ä»¶ï¼š
å‰¯æœ¬èŠ‚ç‚¹å¿…é¡»èƒ½ä¸zookeeperä¿æŒä¼šè¯ï¼ˆå¿ƒè·³æœºåˆ¶ğŸ’—ï¼‰ å‰¯æœ¬èƒ½å¤Ÿå¤åˆ¶leaderä¸Šçš„æ‰€æœ‰å†™æ“ä½œï¼Œå¹¶ä¸”ä¸èƒ½è½åå¤ªå¤šï¼ˆå¡ä½æˆ–æ»åçš„å‰¯æœ¬ç”±replica.lag.time.max.msé…ç½®ï¼‰ ä¸€æ—¦followerä»leaderåŒæ­¥æ•°æ®çš„å»¶è¿Ÿè¶…è¿‡é˜€å€¼ï¼Œleaderå°±ä¼šæŠŠå®ƒä»ISRä¸­å‰”é™¤ï¼Œæ”¾å…¥OSRï¼Œæ–°åŠ å…¥çš„followerä¹Ÿä¼šåŠ å…¥OSR
AR(assigned replicas) = ISR+OSR (out of-sync-replicas)
å¦‚ä½•ä¿è¯å·²æäº¤çš„ä¿¡æ¯ä¸ä¸¢å¤±
replication+leaderé€‰ä¸¾æœºåˆ¶]]></description>
</item>
<item>
  <title>mysqlç®€ä»‹</title>
  <link>https://caijin.dev/zh/mysql/mysql/</link>
  <pubDate>Sat, 02 May 2020 20:18:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/mysql/mysql/</guid>
  <description><![CDATA[Mysql MyISAM vs Innodb?
mysqlçš„ç´¢å¼•æœ‰å“ªäº›
èšç°‡ç´¢å¼•
åœ¨innodbè¡¨ä¸Šå®šä¹‰äº†ä¸€ä¸ªä¸»é”®ï¼Œinnodbé»˜è®¤ä¼šä½¿ç”¨å®ƒä½œä¸ºç»„ç°‡ç´¢å¼•ï¼ˆå»ºè®®æ¯ä¸ªè¡¨éƒ½å®šä¹‰ä¸ªä¸»é”®ï¼‰ å¦‚æœæ²¡æœ‰å®šä¹‰ä¸»é”®ï¼Œinnodbä¼šæŸ¥æ‰¾ç¬¬ä¸€ä¸ªã€å”¯ä¸€ç´¢å¼•ã€‘ä½œä¸ºèšç°‡ç´¢å¼• å¦‚æœæ—¢æ²¡æœ‰å®šä¹‰ä¸»é”®ï¼Œåˆæ²¡æœ‰å”¯ä¸€ç´¢å¼•ï¼Œinnodbä¼šåœ¨å†…éƒ¨ç”Ÿæˆä¸€ä¸ªåä¸º_GEN_CLUST_INDEX_ çš„éšå¼èšç°‡ç´¢å¼• èšç°‡ç´¢å¼•å¦‚ä½•åŠ å¿«æŸ¥è¯¢é€Ÿåº¦ï¼šå› ä¸ºç´¢å¼•æœç´¢ç›´æ¥æŒ‡å‘åŒ…å«æ‰€æœ‰è¡Œæ•°æ®é¡µï¼ˆdata pageï¼‰
éèšç°‡ç´¢å¼•
éèšç°‡ç´¢å¼•é€šå¸¸ä¹Ÿè¢«ç§°ä¸ºäºŒçº§ç´¢å¼•æˆ–è¾…åŠ©ç´¢å¼•ï¼Œåœ¨innodbä¸­ï¼Œæ¯ä¸ªè¾…åŠ©ç´¢å¼•ä¸­çš„æ¯æ¡è®°å½•éƒ½ä¼šåŒ…å«è¯¥è¡Œçš„ä¸»é”®åˆ— ( ä¹Ÿå°±æ˜¯èšç°‡ç´¢å¼•çš„é”® ) ï¼Œä»¥åŠä¸ºè¾…åŠ©ç´¢å¼•æŒ‡å®šçš„åˆ—ã€‚InnoDB ä½¿ç”¨æ­¤ä¸»é”®å€¼æ¥æœç´¢èšç°‡ç´¢å¼•ä¸­çš„è¡Œ
ä»¥ä¸Šä¸¤è€…çš„åŒºåˆ«
åˆ’åˆ†ä¾æ®
InnoDB ä¼šä½¿ç”¨èšç°‡ç´¢å¼•æ¥ä¿å­˜æ•°æ®ï¼Œè€Œéèšç°‡ç´¢å¼•çš„ç›®çš„ä»…ä»…æ˜¯åŠ å¿«æŸ¥è¯¢é€Ÿåº¦
ä¸»è¦åŒºåˆ«
èšç°‡ç´¢å¼•æ˜¯å”¯ä¸€çš„ï¼Œä¸€ä¸ª InnoDB è¡¨åªæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œè€Œä¸”ä¸€å®šä¼šæœ‰ä¸€ä¸ªèšç°‡ç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼ŒInnodb å­˜å‚¨å¼•æ“ä¼šè‡ªåŠ¨æ·»åŠ ä¸€ä¸ª éèšç°‡æ‰€ä»¥å¯ä»¥æœ‰å¤šä¸ªï¼Œè€Œä¸”åªèƒ½ç”±ç”¨æˆ·è‡ªå·±æ·»åŠ ï¼ŒInnoDB é»˜è®¤å¹¶ä¸ä¼šåˆ›å»ºä»»ä½•éèšç°‡ç´¢å¼• åŒ…å«å…³ç³»
éèšç°‡ç´¢å¼•ä¸­ä¸€å®šåŒ…å«äº†èšç°‡ç´¢å¼•çš„åˆ—å€¼ï¼Œä½†åè¿‡æ¥å´ä¸å­˜åœ¨
ä»€ä¹ˆæ˜¯ç»„åˆç´¢å¼•ï¼ŒåŒ¹é…åŸåˆ™æ˜¯ä»€ä¹ˆ
ä»€ä¹ˆæ˜¯å¤šè¡¨è¿æ¥ï¼Ÿæœ‰å“ªäº›è¿æ¥ç±»å‹ï¼ŒåŸç†æ˜¯ä»€ä¹ˆï¼Ÿ
äº‹ç‰©çš„éš”ç¦»çº§åˆ«ä»¥åŠç‰¹å¾
çº§åˆ« è¯´æ˜ Read uncommitted å½“ä¸€ä¸ªäº‹ç‰©Aæ›´æ”¹äº†æ•°æ®ï¼Œä½†è¿˜æœªæäº¤çš„æ—¶å€™ï¼Œå¦å¤–ä¸€ä¸ªäº‹ç‰©Bè¯»å–è¿™ä¸ªæ•°æ®çš„æ—¶å€™ï¼Œè¯»å–çš„æ˜¯Aæœªæäº¤çš„æ•°æ®ã€‚å¦‚æœAå›æ»šäº†äº‹ç‰©ï¼Œå°±å‘ç”Ÿäº†è„è¯» Read committed äº‹ç‰©Aè¯»å–äº†æ•°æ®ï¼Œäº‹ç‰©Bç´§æ¥ç€æ›´æ–°å¹¶æäº¤äº†æ•°æ®ï¼Œå½“äº‹ç‰©Aå†æ¬¡è¯»å–è¯¥æ•°æ®æ—¶ï¼Œæ•°æ®å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼ŒåŒä¸€ä¸ªäº‹ç‰©ï¼Œå¤šæ¬¡è¯»å–çš„æ•°æ®ä¸ä¸€è‡´ï¼Œå°±æ˜¯æ‰€è°“ä¸å¯é‡å¤è¯» Repeatable read å½“ä¸€ä¸ªäº‹ç‰©å¼€å§‹çš„æ—¶å€™ï¼Œå…¶ä»–çš„äº‹ç‰©å°±ä¸èƒ½å¯¹æ•°æ®è¿›è¡Œæ›´æ”¹ï¼Œè¿™æ ·ï¼Œæ•°æ®å°±æ˜¯å¯é‡å¤è¯»çš„äº†ã€‚ä½†æ˜¯è¿™æ ·è¿˜æ˜¯ä¸èƒ½é¿å…å¹»è¯»ï¼šäº‹ç‰©Aå¼€å¯äº†ä»¥åä¸€ç›´è¯»å–çš„æ˜¯å¤‡ä»½æ•°æ®ï¼Œäº‹ç‰©Båœ¨è¿™ä¸ªæ—¶å€™åˆ é™¤äº†æ•°æ®å¹¶æäº¤äº†ï¼Œä½†æ˜¯Aäº‹ç‰©æŸ¥è¯¢åˆ°çš„è¿˜æ˜¯æ—§æ•°æ®ï¼Œè¿™æ ·å°±äº§ç”Ÿå¹»è¯»äº† Serializable è¿™æ˜¯æœ€é«˜çš„äº‹ç‰©éš”ç¦»çº§åˆ«ï¼Œäº‹ç‰©åªèƒ½ä¸€ä¸ªä¸ªé¡ºåºæ‰§è¡Œï¼Œæ‰€ä»¥æ€§èƒ½å¾ˆä½ Innodbæ˜¯å¦‚ä½•å®ç°è¡Œé”çš„ï¼Ÿ
mysqlé”ç±»å‹
å…¨å±€é”ï¼šå¯¹æ•´ä¸ªæ•°æ®åº“å®ä¾‹åŠ é”ï¼Œä¸»è¦ç”¨äºå…¨åº“å¤‡ä»½ è¡¨çº§é”ï¼šè¡¨é”å’Œå…ƒæ•°æ®é”MDLï¼Œè¡¨é”ï¼šå¦‚æœä¸èƒ½ç¡®å®šå”¯ä¸€æ€§çš„è¯ï¼Œä¼šå¯¹æ•´ä¸ªè¡¨è¿›è¡ŒåŠ é”ï¼›å¦‚æœæ²¡æœ‰æ›´æ”¹è¡¨ç»“æ„ï¼ŒMDLåŠ è¯»é”ï¼Œå¦åˆ™åŠ å†™é”ï¼Œè¯»é”å’Œå†™é”æ˜¯äº’æ–¥çš„ è¡Œé”ï¼šé’ˆå¯¹ç‰¹å®šçš„æ•°æ®åŠ é”ï¼Œmysqlå¯¹ç´¢å¼•åŠ é”ï¼Œoracleæ˜¯å¯¹æ•°æ®åŠ é”ï¼Œinnodbè¡Œé”çš„ç®—æ³•ï¼š Record locksï¼šä¸ºç´¢å¼•çºªå½•ä¸Šé”ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰ç´¢å¼•ï¼ŒInnodbä¼šä¸ºè¯¥è¡¨åˆ›å»ºä¸€ä¸ªéšè—çš„èšç°‡ç´¢å¼•ï¼Œå¹¶ä½¿ç”¨è¯¥ç´¢å¼• Gap locksï¼šè¯¥é”ä¼šé”å®šä¸€ä¸ªèŒƒå›´ï¼Œä½†æ˜¯ä¸åŒ…æ‹¬çºªå½•æœ¬èº«ã€‚ Next-key locksï¼šå°±æ˜¯record lockså’Œgap locksçš„ç»„åˆï¼Œå³é”å®šä¸€ä¸ªèŒƒå›´å’Œè¯¥çºªå½•æœ¬èº«ã€‚Innodbä½¿ç”¨è¯¥é”è§£å†³å¹»è¯»é—®é¢˜ã€‚å¦‚æœç´¢å¼•å…·æœ‰å”¯ä¸€æ€§ï¼Œåˆ™innodbä¼šå°†next-key locksè‡ªåŠ¨é™ä¸ºrecord locks mysqlç»„åˆç´¢å¼•æŒ‰ç…§æœ€å·¦åŒ¹é…çš„åŸåˆ™è¿›è¡ŒåŒ¹é…
æ¯”å¦‚æœ‰ä¸ªkeyï¼ˆa,b,c)ï¼Œåˆ™æ”¯æŒa|a,b|a,b,c 3ç§ç»„åˆè¿›è¡ŒæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒbï¼ŒcæŸ¥æ‰¾ï¼Œè€Œä¸”ä¸whereæ¡ä»¶çš„é¡ºåºæ— å…³ï¼Œå› ä¸ºä¼˜åŒ–å™¨ä¼šå¯¹sqlè¿›è¡Œä¼˜åŒ–
ç´¢å¼•å¤±æ•ˆçš„æ¡ä»¶ï¼š
åœ¨ç´¢å¼•ä¸Šåšä»»ä½•æ“ä½œï¼ˆè®¡ç®—ï¼Œå‡½æ•°ï¼Œè‡ªåŠ¨æˆ–è€…æ‰‹åŠ¨ç±»å‹è½¬æ¢ï¼‰ï¼Œä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆè€Œè½¬å‘å…¨è¡¨æ‰«æ å­˜å‚¨ç´¢å¼•ä¸èƒ½ä½¿ç”¨ç´¢å¼•_èŒƒå›´æ¡ä»¶_ å³è¾¹çš„åˆ— ä½¿ç”¨ä¸ç­‰äºï¼ˆï¼= ï½œï½œ &lt;&gt;ï¼‰çš„æ—¶å€™æ— æ³•ä½¿ç”¨ç´¢å¼•ï¼Œä¼šå¯¼è‡´å…¨è¡¨æ‰«æ likeä»¥é€šé…ç¬¦å¼€å¤´ï¼Œç´¢å¼•å¤±è´¥ï¼Œå…¨è¡¨æ‰«æ ä¸€èˆ¬å»ºè®®ï¼š]]></description>
</item>
<item>
  <title>axiosçš„ä½¿ç”¨</title>
  <link>https://caijin.dev/zh/front-end/axios%E7%9A%84%E4%BD%BF%E7%94%A8/</link>
  <pubDate>Sat, 18 Apr 2020 21:24:19 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/front-end/axios%E7%9A%84%E4%BD%BF%E7%94%A8/</guid>
  <description><![CDATA[axios çš„ä½¿ç”¨ axios æ˜¯å‰ç«¯æœ€å¸¸è§çš„ç½‘ç»œåº“ã€‚ä¸»è¦è°ƒç”¨æ–¹å¼æœ‰ä¸¤ç§å½¢å¼ï¼šaxios(config) å’Œ axios(url, config)ï¼Œä¸‹é¢ç®€è¦ä»‹ç»axiosçš„ä½¿ç”¨ã€‚
1ã€è¯·æ±‚æ–¹æ³• å¸¸ç”¨çš„httpè¯·æ±‚æ–¹æ³•æœ‰ä»¥ä¸‹5ä¸ª
æ–¹æ³• ä½œç”¨ GET è¯·æ±‚èµ„æº POST æ–°å¢èµ„æº PUT æ›´æ–°èµ„æºï¼ˆéœ€è¦èµ„æºçš„æ‰€æœ‰ä¿¡æ¯ï¼‰ PATCH æ›´æ–°èµ„æºçš„éƒ¨åˆ†ä¿¡æ¯ DELETE åˆ é™¤èµ„æº ä¾‹å¦‚æœ‰userå¯¹è±¡ï¼š{&quot;id&quot;:1, &quot;name&quot;:&quot;axios-user&quot;, &quot;age&quot;:20}
ä½¿ç”¨axioså‘èµ·è¯·æ±‚å¯ä»¥ç”¨axios(config)çš„å½¢å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
axios({ method:&#34;get&#34;,//è¯·æ±‚æ–¹æ³• url:&#34;/users&#34;,//è¯·æ±‚çš„URL params:{id:1},//getã€deleteæ–¹æ³•çš„è¯·æ±‚å‚æ•°ï¼Œä¼šæ”¾åˆ°urlä¹‹å data:{}//postã€putã€patchæ–¹æ³•çš„è¯·æ±‚å‚æ•°ï¼Œä¼šæ”¾åˆ°bodyä¸­ }).then((resp)=&gt;{ //è¯·æ±‚æˆåŠŸçš„å¤„ç† console.log(resp.data)//æ§åˆ¶å°æ‰“å°è¿”å›çš„bodyæ•°æ® }).catch((err)=&gt;{ //è¯·æ±‚å¤±è´¥çš„å¤„ç† console.log(err) }).then(()={ //ä¸ç®¡æˆåŠŸä¸å¦ï¼Œéƒ½ä¼šæ‰§è¡Œ console.log(&#34;æ­¤å¤„ä¸€å®šä¼šæ‰§è¡Œ&#34;) })å¯¹äºå…¶ä»–çš„æ–¹å¼ï¼Œæ¢ä¸€ä¸‹configå¯¹è±¡ç§çš„methodå³å¯
2ã€åˆ«å å¦‚æœæœ‰å¾ˆå¤šçš„è¯·æ±‚ï¼Œæ¯ä¸ªæˆ‘ä»¬éƒ½éœ€è¦å†™ä¸€å †åƒä¸Šé¢1ä¸­çš„axiosçš„é…ç½®ä¿¡æ¯ï¼Œä¸€ä¸ªæ˜¯å†™èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œå¦å¤–ä¸€ä¸ªï¼Œä»£ç çœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒä¹±ï¼Œaxiosä¹Ÿæä¾›äº†å¯¹åº”è¯·æ±‚æ–¹æ³•çš„åˆ«åå‡½æ•°ï¼Œç”¨axios(url, config)çš„å½¢å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š
//get axios(&#34;/users&#34;,{params:{id:1}}).then((resp)=&gt;{}) //ç­‰åŒäºå¦‚ä¸‹æ–¹å¼ axios.get(&#34;/users&#34;,{params:{id:1}}).then((resp)=&gt;{}) //post axios.post(&#34;/user&#34;,{id:2,name:&#34;axios-user2&#34;,age:22}) //put åªæ›´æ–°éƒ¨åˆ†ä¿¡æ¯ä¹Ÿéœ€è¦å°†æ•´ä¸ªèµ„æºå¯¹è±¡æäº¤ axios.put(&#34;/user&#34;,{id:2,name:&#34;axios-xxx&#34;,age:22}) //patch åªéœ€æäº¤å”¯ä¸€æ ‡è¯†å’Œæ›´æ”¹çš„æ•°æ®é¡¹å³å¯ axios.patch(&#34;/users&#34;,{id:2,age:18}) //delete axios.delete(&#34;/users&#34;,{params:{id:2}})3ã€å¹¶å‘è¯·æ±‚ axios ä¹Ÿæ”¯æŒåŒæ—¶å‘èµ·å¤šä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”å¯ä»¥è·å–åˆ°æ¯ä¸ªè¯·æ±‚çš„ç»“æœï¼Œä½¿ç”¨axios.all() å’Œ axios.spread()å³å¯ï¼Œall()æ–¹æ³•çš„å‚æ•°æ˜¯å‡½æ•°æ•°ç»„ï¼Œspread()æ–¹æ³•æ¥å—çš„æ˜¯å›è°ƒå‡½æ•°ï¼Œå‡½æ•°ä¸­çš„å‚æ•°å³æ˜¯all()ä¸­çš„è¯·æ±‚ç»“æœï¼Œé¡ºåºå’Œall()ä¿æŒä¸€è‡´ã€‚
ä¾‹å­å¦‚ä¸‹ï¼š
axios.all( [ axios.get(&#34;/users&#34;),//è¯·æ±‚1 axios.get(&#34;/students&#34;),//è¯·æ±‚2 axios.post(&#34;/teachers&#34;,{id:5,name:&#34;teacher wang&#34;,age:35})//è¯·æ±‚3 ] ).then( axios.]]></description>
</item>
<item>
  <title>Cgroup_subsystem</title>
  <link>https://caijin.dev/zh/linux/cgroup_subsystem/</link>
  <pubDate>Thu, 22 Aug 2019 21:22:50 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/linux/cgroup_subsystem/</guid>
  <description><![CDATA[ä¸Šä¸€ç¯‡cgroupä¸»è¦è®²äº†cgroupå’Œå¸¸ç”¨çš„subsystemï¼Œç®—æ˜¯ç†è®ºéƒ¨åˆ†ï¼Œéƒ½è¯´å®è·µå‡ºçœŸç†ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯å®è·µéƒ¨åˆ†äº†ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨ã€‚
subsystem cpuset
é™åˆ¶ cpuset.cpus: è®¾ç½®ä»»åŠ¡å¯ä»¥ä½¿ç”¨çš„CPUæ ¸å¿ƒçš„ç¼–å·ï¼Œæ ¼å¼ä¸ºï¼šfrom_number-to_number, numberï¼Œç”¨,éš”å¼€ cpuset.mems: è®¾ç½®cpuå¯ä½¿ç”¨çš„memory nodeï¼Œæ ¼å¼åŒä¸Š ç»Ÿè®¡ cpuset.effective_cpus: åœ¨ä½¿ç”¨çš„cpuæ ¸å¿ƒ cpuset.effective_mem: åœ¨ä½¿ç”¨çš„memory node cpuset.memory_pressureï¼šcupsetä¸­çš„åˆ†é¡µ cpu
é™åˆ¶ cpu.cfs_quota_us: è®¾å®šå‘¨æœŸå†…æœ€å¤šå¯ä½¿ç”¨çš„æ—¶é—´ cpu.cfs_period_us: è®¾ç½®ä½¿ç”¨cpuçš„å‘¨æœŸæ—¶é—´ï¼Œéœ€è¦å’Œcfs_quota_usé…åˆä½¿ç”¨ ç»Ÿè®¡ cpu.stat: æ˜¾ç¤ºå„ç§ç»Ÿè®¡ä¿¡æ¯ cpuacct.stat: ç»Ÿè®¡ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä½¿ç”¨çš„cpuæ—¶é•¿ cpuacct.usage_*: ç»Ÿè®¡æ¯ä¸ªä»»åŠ¡ä½¿ç”¨çš„cpuæ—¶é•¿ blkio
é™åˆ¶ blkio.throttle.read_bps_device: è®¾ç½®è¯»å–è®¾å¤‡çš„é€Ÿç‡ä¸Šé™ï¼Œæ ¼å¼ä¸ºï¼šdevice_num:node_number byte_per_second blkio.throttle.read_iops_device: è®¾ç½®æ¯ç§’è¯»å–è®¾å¤‡çš„æ¬¡æ•°ä¸Šé™ blkio.throttle.write_bps_device: è®¾ç½®å†™è®¾å¤‡çš„é€Ÿç‡ä¸Šé™ blkio.throttle.write_iops_device: è®¾ç½®æ¯ç§’å†™è®¾å¤‡çš„æ¬¡æ•° ç»Ÿè®¡ blkio.reset_stats: é‡ç½®ç»Ÿè®¡ä¿¡æ¯ blkio.throttle.io_service_bytes: è¯»è®¾å¤‡/å†™è®¾å¤‡çš„å­—èŠ‚æ•° blkio.throttle.*_recursive: å„ç§ç»Ÿè®¡æ•°æ®çš„é€’å½’ç‰ˆæœ¬ã€‚è¿™äº›æ–‡ä»¶æ˜¾ç¤ºä¸éé€’å½’å¯¹åº”æ–‡ä»¶ç›¸åŒçš„ä¿¡æ¯ï¼Œä½†åŒ…æ‹¬æ¥è‡ªæ‰€æœ‰åä»£cgroupçš„ç»Ÿè®¡ä¿¡æ¯ blkio.throttle.io_serviced: ioæ¬¡æ•° memory
é™åˆ¶
memory.limit_in_bytes: è®¾ç½®å†…å­˜ä½¿ç”¨é™åˆ¶ï¼Œå•ä½æœ‰kã€mã€gï¼Œ-1æ—¶æ— é™åˆ¶
memory.max_usage_in_bytes: è®¾ç½®æœ€å¤§å†…å­˜ä½¿ç”¨é‡
memory.move_charge_at_immigrate: è®¾ç½®ç§»åŠ¨çš„èŠ±è´¹
memory.soft_limit_in_bytes: è½¯é™åˆ¶ï¼Œéœ€è¦æ¯”limit_in_byteså°
memory.oom_controlï¼šæ”¹å‚æ•°å¡« 0 æˆ– 1ï¼Œ 0è¡¨ç¤ºå¼€å¯ï¼Œå½“ cgroup ä¸­çš„è¿›ç¨‹ä½¿ç”¨èµ„æºè¶…è¿‡ç•Œé™æ—¶ç«‹å³æ€æ­»è¿›ç¨‹ï¼Œ1è¡¨ç¤ºä¸å¯ç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ…å« memory å­ç³»ç»Ÿçš„ cgroup éƒ½å¯ç”¨]]></description>
</item>
<item>
  <title>Cgroup</title>
  <link>https://caijin.dev/zh/linux/cgroup/</link>
  <pubDate>Mon, 19 Aug 2019 20:18:42 &#43;0800</pubDate>
  <author>caijin</author>
  <guid>https://caijin.dev/zh/linux/cgroup/</guid>
  <description><![CDATA[ç®€ä»‹ Croups(control groups)æ˜¯Linuxå†…æ ¸æä¾›çš„ä¸€ç§å¯ä»¥é™åˆ¶ã€è®°å½•ã€éš”ç¦»è¿›ç¨‹(è¿›ç¨‹ç»„)æ‰€ä½¿ç”¨çš„çš„ç‰©ç†èµ„æºï¼ˆå¦‚ï¼šCPUã€memoryã€IOã€deviceç­‰ï¼‰çš„æœºåˆ¶ã€‚æ˜¯è½»é‡çº§è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆdockerã€lxcï¼‰çš„åŸºç¡€ä¹‹ä¸€ã€‚å¦å¤–çš„åŸºç¡€åŒ…æ‹¬namespaceã€ufs(union file system)ç­‰ã€‚
æ¦‚å¿µ åŸºæœ¬æ¦‚å¿µ ä»»åŠ¡ï¼ˆtaskï¼‰ã€‚åœ¨cgroupä¸­ï¼Œä»»åŠ¡å°±æ˜¯ç³»ç»Ÿçš„ä¸€ä¸ªè¿›ç¨‹ã€‚ æ§åˆ¶ç»„ï¼ˆcontrol groupï¼‰ã€‚æ§åˆ¶ç»„å°±æ˜¯ä¸€ç»„æŒ‰ç…§æŸç§æ ‡å‡†åˆ’åˆ†çš„è¿›ç¨‹ï¼Œæ¯”å¦‚æŒ‰å†…å­˜å¤§å°ï¼Œcpuçš„ä½¿ç”¨ç‡ï¼Œæˆ–è€…ioçš„é€Ÿç‡é™åˆ¶åˆ’åˆ†æˆç»„ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŠ å…¥åˆ°æŸä¸ªæ§åˆ¶ç»„ï¼Œä¹Ÿå¯ä»¥ä»ä¸€ä¸ªç»„è¿ç§»åˆ°å¦å¤–ä¸€ä¸ªç»„ã€‚ä¸€ä¸ªç»„ä¸­çš„è¿›ç¨‹å¯ä»¥ä½¿ç”¨cgroupä»¥æ§åˆ¶ç»„ä¸ºå•ä½åˆ†é…çš„èµ„æºï¼ŒåŒæ—¶å—åˆ°ç»„åˆ†é…åˆ°çš„èµ„æºçš„é™åˆ¶ã€‚ å±‚çº§ï¼ˆhierarchyï¼‰ã€‚æ§åˆ¶ç»„å¯ä»¥ç»„ç»‡æˆä¸ºå±‚çº§çš„å½¢å¼ï¼Œç»„æˆä¸€æ£µæ§åˆ¶ç»„æ ‘ã€‚æ§åˆ¶ç»„æ ‘ä¸Šçš„å­èŠ‚ç‚¹æ˜¯çˆ¶èŠ‚ç‚¹æ§åˆ¶ç»„çš„å­©å­ï¼Œç»§æ‰¿çˆ¶æ§åˆ¶ç»„çš„èµ„æºé™åˆ¶ã€‚ å­ç³»ç»Ÿï¼ˆsubsystemï¼‰ã€‚ä¸€ä¸ªå­ç³»ç»Ÿå°±æ˜¯ä¸€ä¸ªèµ„æºæ§åˆ¶å™¨ï¼Œå­ç³»ç»Ÿå¿…é¡»é™„åŠ ï¼ˆattachï¼‰åˆ°ä¸€ä¸ªå±‚çº§ä¸Šæ‰èƒ½ä½¿ç”¨ã€‚ å…³ç³»å’Œé™åˆ¶ ä¸€ä¸ªå­ç³»ç»Ÿæœ€å¤šåªèƒ½é™„åŠ åˆ°ä¸€ä¸ªå±‚çº§ã€‚ ä¸€ä¸ªå±‚çº§å¯ä»¥æœ‰å¤šä¸ªå­ç³»ç»Ÿã€‚ ä¸€ä¸ªä»»åŠ¡å¯ä»¥æ˜¯å¤šä¸ªcgroupçš„æˆå‘˜ï¼Œä½†æ˜¯è¿™äº›cgroupå¿…é¡»æ˜¯ä¸åŒçš„å±‚çº§ã€‚ ä»»åŠ¡åˆ›å»ºå­ä»»åŠ¡æ—¶ï¼Œå­ä»»åŠ¡è‡ªåŠ¨æˆä¸ºå…¶çˆ¶ä»»åŠ¡æ‰€åœ¨çš„cgroupæˆå‘˜ã€‚å¯ä»¥æŠŠå­ä»»åŠ¡ç§»åŠ¨åˆ°ä¸åŒçš„cgroupä¸­ï¼Œä½†æœ€å¼€å§‹æ—¶ï¼Œå®ƒæ€»æ˜¯ç»§æ‰¿çˆ¶ä»»åŠ¡çš„cgroupã€‚ ç³»ç»Ÿæ”¯æŒçš„å­ç³»ç»Ÿ æŸ¥çœ‹ç³»ç»Ÿæ”¯æŒçš„cgroup
# 1ã€å®‰è£…cgroupå·¥å…·ï¼Œå¦‚æœå·²ç»å®‰è£…ï¼Œè¯·å¿½ç•¥ sudo apt install cgroup-tools # 2ã€æŸ¥çœ‹ç³»ç»Ÿçš„å­ç³»ç»Ÿ $lssubsys cpuset cpu,cpuacct blkio memory devices freezer net_cls,net_prio perf_event hugetlb pids rdma jin@k53:~$ jin@k53:~$ uname -a Linux k53 5.0.0-25-generic #26-Ubuntu SMP Thu Aug 1 12:04:58 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux jin@k53:~$ lsb_release -a No LSB modules are available. Distributor ID: Ubuntu Description: Ubuntu 19.]]></description>
</item>
</channel>
</rss>

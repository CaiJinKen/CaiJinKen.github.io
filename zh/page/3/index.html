<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta name=generator content="Hugo 0.129.0"><meta name=theme content='FixIt v0.3.9'><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>*&lt;^_^>*</title><meta name=author content="caijin">
<meta name=author-link content="https://caijin.dev"><meta name=description content><meta itemprop=name content="*<^_^>*"><meta itemprop=datePublished content="2020-05-02T20:20:42+08:00"><meta itemprop=dateModified content="2020-05-02T20:20:42+08:00"><meta property="og:url" content="https://caijin.dev/zh/"><meta property="og:site_name" content="*<^_^>*"><meta property="og:title" content="*<^_^>*"><meta property="og:locale" content="zh_CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="*<^_^>*"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://caijin.dev/zh/><link rel=alternate href=/zh/index.xml type=application/rss+xml title="*<^_^>*"><link rel=feed href=/zh/index.xml type=application/rss+xml title="*<^_^>*"><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/caijin.dev\/zh\/","inLanguage":"zh-CN","author":{"@type":"Person","name":"caijin"},"license":"xxxx","name":"*\u003c^_^\u003e*"}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper><div class=header-title><a href=/zh/ title="*<^_^>*"><span class=header-title-text>*&lt;^_^>*</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class="menu-item active"><a class=menu-link href=/zh/>文档</a></li><li class=menu-item><a class=menu-link href=/zh/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/zh/tags/>标签</a></li><li class=menu-item><a class=menu-link href=https://github.com/CaiJinKen rel="noopener noreferrer" target=_blank><i class="fa fa-heart" style=color:red></i> github</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language-switch"><span role=button aria-label title><i class="fa-solid fa-language fa-fw" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item><span class="menu-link text-secondary" title=简体中文>简体中文</span></li><li class=menu-item><a href=/en/ class=menu-link title=English>English</a></li></ul></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/zh/ title="*<^_^>*"><span class=header-title-text>*&lt;^_^>*</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class="menu-item active"><a class=menu-link href=/zh/>文档</a></li><li class=menu-item><a class=menu-link href=/zh/categories/>分类</a></li><li class=menu-item><a class=menu-link href=/zh/tags/>标签</a></li><li class=menu-item><a class=menu-link href=https://github.com/CaiJinKen rel="noopener noreferrer" target=_blank><i class="fa fa-heart" style=color:red></i> github</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span><span class="menu-system-item language-switch">
<span role=button aria-label title>简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option value=/zh/ selected disabled>简体中文</option><option value=/en/>English</option></select></span></li></ul></nav></div></header><main class=container><div class="page home posts"><article class="single summary" itemscope itemtype=http://schema.org/Article><h2 class=single-title itemprop="name headline"><a href=/zh/golang/golang-%E9%AB%98%E7%BA%A7/>Golang高级002</a></h2><div class=post-meta><span class=post-author><a href=https://caijin.dev target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src="https://avatars.githubusercontent.com/u/36183188?s=400&amp;u=69ec665b3e4ffcc40a98072d56fbaa5b044c5968&amp;v=4" alt=caijin data-title=caijin width=20 height=20 class=avatar style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'>&nbsp;caijin</a></span>&nbsp;<span class=post-publish title='2019-08-14 19:33:19'></span><span class=post-included-in>&nbsp;</span></div><div class=content>map查找、类型断言、chan都会产生两个值，后一个值为bool类型
map为返回是否有对应的key，断言为是为判断的类型，chan为是否成功获取值（调用close关闭chan时，也会获取到零值，不能判断是发送的就是零值还是close关闭的，此时ok就有用了，为false）
如果一个类型本身是一个指针的话，是不允许出现在接收器中的
type P *int func (P)String() string{return ""}// compile error</div><div class=post-footer><a href=/zh/golang/golang-%E9%AB%98%E7%BA%A7/></a><div class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/zh/tags/golang/ class=post-tag>Golang</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h2 class=single-title itemprop="name headline"><a href=/zh/linux/namespace/>Namespace</a></h2><div class=post-meta><span class=post-author><a href=https://caijin.dev target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src="https://avatars.githubusercontent.com/u/36183188?s=400&amp;u=69ec665b3e4ffcc40a98072d56fbaa5b044c5968&amp;v=4" alt=caijin data-title=caijin width=20 height=20 class=avatar style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'>&nbsp;caijin</a></span>&nbsp;<span class=post-publish title='2019-08-14 19:33:19'></span><span class=post-included-in>&nbsp;</span></div><div class=content>简介 linux namespace 是linux内核提供的一种环境（资源）隔离的方式，主要提供了UTS、IPC、network、User、mount、PID的隔离
类别 系统调用参数 内核版本 作用 UTS CLONE_NEWUTS Linux 2.6.19 隔离主机名称，域名称 IPC CLONE_NEWIPC Linux 2.6.10 隔离进程间通信 Network CLONE_NEWNET Linux 2.6.29 隔离网络 User CLONE_NEWUSER Linux 3.8 隔离用户 Mount CLONE_NEWNS Linux 2.4.19 隔离挂载点 PID CLONE_NEWPID linux 2.6.24 隔离进程ID UTC 未隔离之前，我们先看看主机名，打开两个终端，终端1执行hostname，查看当前主机名，第二个终端中执行sudo hostname xxx再在终端1中执行hostname，可以发现主机名称已经被修改了。
为了能够更好的感受下namespace，自己动手写个程序是最好不过的方式了，下面是我写的一个demo，文件名是namespace.go
package main import ( "fmt" "os" "os/exec" "syscall" ) func main() { cmd := exec.Command(os.Args[1]) cmd.SysProcAttr = &amp;syscall.SysProcAttr{ Cloneflags: syscall.CLONE_NEWUTS, } cmd.Stdin = os.Stdin cmd.Stdout = os.Stdout cmd.</div><div class=post-footer><a href=/zh/linux/namespace/></a><div class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/zh/tags/linux/ class=post-tag>Linux</a><a href=/zh/tags/docker/ class=post-tag>Docker</a></div></div></article><article class="single summary" itemscope itemtype=http://schema.org/Article><h2 class=single-title itemprop="name headline"><a href=/zh/linux/arch_install/>Arch_install</a></h2><div class=post-meta><span class=post-author><a href=https://caijin.dev target=_blank rel="external nofollow noopener noreferrer author" class=author><img loading=lazy src="https://avatars.githubusercontent.com/u/36183188?s=400&amp;u=69ec665b3e4ffcc40a98072d56fbaa5b044c5968&amp;v=4" alt=caijin data-title=caijin width=20 height=20 class=avatar style="background:url(/images/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title;for(const e of["style","data-title","onerror","onload"])this.removeAttribute(e)'>&nbsp;caijin</a></span>&nbsp;<span class=post-publish title='2019-07-13 22:24:48'></span><span class=post-included-in>&nbsp;</span></div><div class=content>使用*nux 制作U盘启动盘 fdisk -l #查看当前系统中的磁盘设备，这里u盘设备是/dev/disk2 umount /dev/disk2 #卸载挂载点，备份u盘里面的重要文件，制作启动盘会执行格式化 sudo dd if=archlinux-2019.07.01-x86_64.iso of=/dev/disk2 bs=1m #这用时可能会比较久，稍等一下准备 制作好u盘启动盘之后，设置电脑从u盘启动，之后进入到arch live里默认以root用户登录，之后就可以进行准备操作了。
vim /etc/hostname #修改安装后的主机名 fdisk /dev/sda #分区，注意设备，我这里是sda mkfs.ext4 /dev/sda1 #格式化分区 mount /dev/sda1 /mnt #挂载分区 vim /etc/pacman.d/mirrorlist #将中国区的源放到非注释的第一行，会提高软件包的下载速度，越靠前，优先级越高。 pacman -Syy #更新镜像源 dhcpcd #使用dhcp自动获取ip地址 ip addr show #应该能够看到分配到ip地址了，如果使用的wifi，并且加密方式是wpa，则执行以下命令，连接wifi wpa_supplicant -i wpl3s0 -c &lt;(wpa_passphrase wifi-ssid password) #wpl3s0 wifi-ssid password 分别是无线网卡名称，wifi名称，wifi密码安装 pacstrap /mnt base base-devel #开始安装到mnt，一路回车就好，稍等直到完成。 arch-chroot /mnt #改变root目录 vim /etc/locale.gen #删除en_US.UTF-8 和 zh_CN.UTF-8 前面的注释 locale-gen #生成语言区域的一些文件 ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime #设置时区为亚洲上海的时区(+08:00)安装引导程序GRUB pacmanm -S os-prober grub #安装grub及依赖 grub-install --target=i386-pc /dev/sda #BIOS方式 grub-install /dev/sda #EFI方式 grub-mkconfig -o /boot/grub/grub.</div><div class=post-footer><a href=/zh/linux/arch_install/></a><div class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/zh/tags/linux/ class=post-tag>Linux</a></div></div></article><ul class=pagination><li class=page-item><span class=page-link><a href=/zh/>1</a></span></li><li class=page-item><span class=page-link><a href=/zh/page/2/>2</a></span></li><li class="page-item active"><span class=page-link><a href=/zh/page/3/>3</a></span></li></ul></div></main><footer class=footer><div class=footer-container><div class="footer-line powered order-2"></div><div class="footer-line copyright order-1" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2024</span><span class=author itemprop=copyrightHolder>
<a href=https://caijin.dev target=_blank rel="external nofollow noopener noreferrer">caijin</a></span><span class="license footer-divider">MIT</span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><div id=mask></div><noscript><div class=noscript-warning></div></noscript></div><link rel=preload href=/lib/katex/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/katex/katex.min.css></noscript><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=/js/flyfish.js defer></script><script>window.config={code:{copyTitle:"",editLockTitle:"",editUnLockTitle:"",editable:!0,maxShownLines:10},cookieconsent:{content:{dismiss:"",link:"",message:""},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},version:"v0.3.9"}</script><script src=/js/theme.min.js defer></script></body></html>